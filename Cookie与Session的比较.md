# Cookie与Session的比较

## 1.从存取方式上比较

​	Cookie中只能保存ASCII字符串,如果需要存取Unicode字符或者二进制数据,需要进行UTF-8,GBK或者BASE64等方式的编码,Cookie中也不能直接存取Java对象.若要存储稍微复杂的信息,使用Cookie是比较困难的.

​	而Session中可以存取任何类型的数据,包括而不限于String,Integer,List,Map等.Session中也可以直接保存JavaBean乃至任何Java类,对象等,使用起来非常方便,可以把Session看作是一个Java容器类.

## 2.从隐私安全上比较

​	Cookie是将数据存储在客户端的浏览器中,对客户端是可见的,客户端的一些程序可能会窥探,复制甚至修改Cookie中的内容,而Session是将数据存储在服务器中,对客户是透明的,不存在敏感信息泄露的危险.

​	如果选用Cookie的话,比较好的方法就是,将敏感信息如账户密码等尽量不要写到Cookie中,例如:百度,谷歌等网站都是将用户密码等敏感信息进行加密,提交到服务器后进行解密,保证Cookie中的信息不被泄露.

## 3.从有效期上比较

​	Cookie可以自行设置其自身的有效期,通过maxAge进行设置,如果设置的数值足够大,那么在本网站登录一次后,将可以永远不进行登录,且Cookie的maxAge的默认值为-1.

​	Session对象默认为浏览器关闭时Session对象销毁,,即信息不能永久的进行存储,而如果设置Session对象的超时时间过长,则会产生累计的Session越来越多,就越容易导致内存溢出.

## 4.从对服务器的负担程度上进行比较

​	Session是将数据保存在服务器中的, 每个用户进行访问都会保存一个Session,如果一个网站的访问量非常大,那么会产生非常多的Session,会消耗大量的内存,例如像谷歌,百度等网站,并发访问的数量极高,是不太可能使用Session来追踪客户回话的.

​	而Cookie对象则是存储在本地客户端,不消耗无需消耗服务器的大量资源,如果并发访问的数量极高,则CooKie是最好的选择.

## 5.从浏览器支持上比较

​	Cookie是需要客户端浏览器进行支持的,如果客户端浏览器禁用了Cookie,或者浏览器不支持Cookie,会发生回话跟踪失败.例如对于WAP而言,常规的Cookie是不能派上用场的.

​	解决这一问题的方法,使用Session对象,并且进行URL地址的重写,需要注意的是所有用到Session的程序都需要进行URL的重写,否则会导致Session回话跟踪失败.对于URL的重写方法有:response.encodeURL(String URL),response.encodeRediret(String URL).Session+URL地址重写也许是WAP应用回话跟踪的唯一选择.

​	 如果客户端支持Cookie,则Cookie既可以设为本浏览器窗口以及子窗口内有效(maxAge=-1),也可以设为所有浏览器窗口有效(maxAge位大于0的某个整数),但Session只能在本浏览器窗口以及子窗口内有效,如果两个浏览器窗口互不相干,他们将使用两个不同的Session.

## 6.从跨域名上比较

​	Cookie支持跨域名访问,Session不支持跨域名访问.



------------------------------------------------------详见<JavaWeb 整合开发王者归来>----------------------------------------------------